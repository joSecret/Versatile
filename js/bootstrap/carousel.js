!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("./util/index"),require("./dom/event-handler"),require("./dom/manipulator"),require("./dom/selector-engine"),require("./util/swipe"),require("./base-component")):"function"==typeof define&&define.amd?define(["./util/index","./dom/event-handler","./dom/manipulator","./dom/selector-engine","./util/swipe","./base-component"],factory):(global="undefined"!=typeof globalThis?globalThis:global||self).Carousel=factory(global.Index,global.EventHandler,global.Manipulator,global.SelectorEngine,global.Swipe,global.BaseComponent)}(this,function(index,EventHandler,Manipulator,SelectorEngine,Swipe,BaseComponent){"use strict";var _interopDefaultLegacy=e=>e&&"object"==typeof e&&"default"in e?e:{default:e},BaseComponent__default;const EventHandler__default=_interopDefaultLegacy(EventHandler),Manipulator__default=_interopDefaultLegacy(Manipulator),SelectorEngine__default=_interopDefaultLegacy(SelectorEngine),Swipe__default=_interopDefaultLegacy(Swipe),NAME="carousel";var DATA_KEY="bs.carousel",EVENT_KEY=".bs.carousel",DATA_API_KEY=".data-api",ARROW_LEFT_KEY="ArrowLeft",ARROW_RIGHT_KEY="ArrowRight";const TOUCHEVENT_COMPAT_WAIT=500,ORDER_NEXT="next",ORDER_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",EVENT_SLIDE="slide.bs.carousel",EVENT_SLID="slid.bs.carousel",EVENT_KEYDOWN="keydown.bs.carousel",EVENT_MOUSEENTER="mouseenter.bs.carousel",EVENT_MOUSELEAVE="mouseleave.bs.carousel",EVENT_DRAG_START="dragstart.bs.carousel";var EventHandler="load.bs.carousel.data-api",EVENT_CLICK_DATA_API,SELECTOR_DATA_SLIDE;const CLASS_NAME_CAROUSEL="carousel",CLASS_NAME_ACTIVE="active",CLASS_NAME_SLIDE="slide",CLASS_NAME_END="carousel-item-end",CLASS_NAME_START="carousel-item-start",CLASS_NAME_NEXT="carousel-item-next",CLASS_NAME_PREV="carousel-item-prev",SELECTOR_ACTIVE=".active",SELECTOR_ITEM=".carousel-item",SELECTOR_ACTIVE_ITEM=".active.carousel-item",SELECTOR_ITEM_IMG=".carousel-item img",SELECTOR_INDICATORS=".carousel-indicators",SELECTOR_DATA_RIDE='[data-bs-ride="carousel"]',KEY_TO_DIRECTION={ArrowLeft:"right",ArrowRight:"left"},Default={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},DefaultType={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Carousel extends _interopDefaultLegacy(BaseComponent).default{constructor(element,config){super(element,config),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=SelectorEngine__default.default.findOne(SELECTOR_INDICATORS,this._element),this._addEventListeners(),"carousel"===this._config.ride&&this.cycle()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}next(){this._slide("next")}nextWhenVisible(){!document.hidden&&index.isVisible(this._element)&&this.next()}prev(){this._slide("prev")}pause(){this._isSliding&&index.triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?EventHandler__default.default.one(this._element,EVENT_SLID,()=>this.cycle()):this.cycle())}to(index){var items=this._getItems(),activeIndex,order;index>items.length-1||index<0||(this._isSliding?EventHandler__default.default.one(this._element,EVENT_SLID,()=>this.to(index)):(activeIndex=this._getItemIndex(this._getActive()))!==index&&this._slide(activeIndex<index?"next":"prev",items[index]))}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(config){return config.defaultInterval=config.interval,config}_addEventListeners(){this._config.keyboard&&EventHandler__default.default.on(this._element,EVENT_KEYDOWN,event=>this._keydown(event)),"hover"===this._config.pause&&(EventHandler__default.default.on(this._element,EVENT_MOUSEENTER,()=>this.pause()),EventHandler__default.default.on(this._element,EVENT_MOUSELEAVE,()=>this._maybeEnableCycle())),this._config.touch&&Swipe__default.default.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const img of SelectorEngine__default.default.find(SELECTOR_ITEM_IMG,this._element))EventHandler__default.default.on(img,EVENT_DRAG_START,event=>event.preventDefault());var endCallBack,swipeConfig={leftCallback:()=>this._slide(this._directionToOrder("left")),rightCallback:()=>this._slide(this._directionToOrder("right")),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Swipe__default.default(this._element,swipeConfig)}_keydown(event){var direction;/input|textarea/i.test(event.target.tagName)||(direction=KEY_TO_DIRECTION[event.key])&&(event.preventDefault(),this._slide(this._directionToOrder(direction)))}_getItemIndex(element){return this._getItems().indexOf(element)}_setActiveIndicatorElement(index){var activeIndicator,activeIndicator;this._indicatorsElement&&((activeIndicator=SelectorEngine__default.default.findOne(".active",this._indicatorsElement)).classList.remove("active"),activeIndicator.removeAttribute("aria-current"),activeIndicator=SelectorEngine__default.default.findOne(`[data-bs-slide-to="${index}"]`,this._indicatorsElement))&&(activeIndicator.classList.add("active"),activeIndicator.setAttribute("aria-current","true"))}_updateInterval(){var element=this._activeElement||this._getActive(),element;element&&(element=Number.parseInt(element.getAttribute("data-bs-interval"),10),this._config.interval=element||this._config.defaultInterval)}_slide(order,element=null){if(!this._isSliding){const activeElement=this._getActive();var isNext="next"===order;const nextElement=element||index.getNextActiveElement(this._getItems(),activeElement,isNext,this._config.wrap);if(nextElement!==activeElement){const nextElementIndex=this._getItemIndex(nextElement),triggerEvent=eventName=>EventHandler__default.default.trigger(this._element,eventName,{relatedTarget:nextElement,direction:this._orderToDirection(order),from:this._getItemIndex(activeElement),to:nextElementIndex});var element=triggerEvent(EVENT_SLIDE);if(!element.defaultPrevented&&activeElement&&nextElement){var element=Boolean(this._interval),completeCallBack;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(nextElementIndex),this._activeElement=nextElement;const directionalClassName=isNext?CLASS_NAME_START:CLASS_NAME_END,orderClassName=isNext?CLASS_NAME_NEXT:CLASS_NAME_PREV;nextElement.classList.add(orderClassName),index.reflow(nextElement),activeElement.classList.add(directionalClassName),nextElement.classList.add(directionalClassName),this._queueCallback(()=>{nextElement.classList.remove(directionalClassName,orderClassName),nextElement.classList.add("active"),activeElement.classList.remove("active",orderClassName,directionalClassName),this._isSliding=!1,triggerEvent(EVENT_SLID)},activeElement,this._isAnimated()),element&&this.cycle()}}}}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return SelectorEngine__default.default.findOne(SELECTOR_ACTIVE_ITEM,this._element)}_getItems(){return SelectorEngine__default.default.find(SELECTOR_ITEM,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(direction){return index.isRTL()?"left"===direction?"prev":"next":"left"===direction?"next":"prev"}_orderToDirection(order){return index.isRTL()?"prev"===order?"left":"right":"prev"===order?"right":"left"}static jQueryInterface(config){return this.each(function(){var data=Carousel.getOrCreateInstance(this,config);if("number"==typeof config)data.to(config);else if("string"==typeof config){if(void 0===data[config]||config.startsWith("_")||"constructor"===config)throw new TypeError(`No method named "${config}"`);data[config]()}})}}return EventHandler__default.default.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(event){var target=index.getElementFromSelector(this),event,target;target&&target.classList.contains("carousel")&&(event.preventDefault(),event=Carousel.getOrCreateInstance(target),(target=this.getAttribute("data-bs-slide-to"))?event.to(target):"next"===Manipulator__default.default.getDataAttribute(this,"slide")?event.next():event.prev(),event._maybeEnableCycle())}),EventHandler__default.default.on(window,EventHandler,()=>{var carousels;for(const carousel of SelectorEngine__default.default.find(SELECTOR_DATA_RIDE))Carousel.getOrCreateInstance(carousel)}),index.defineJQueryPlugin(Carousel),Carousel});