!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("./config"),require("../dom/event-handler"),require("./index")):"function"==typeof define&&define.amd?define(["./config","../dom/event-handler","./index"],factory):(global="undefined"!=typeof globalThis?globalThis:global||self).Swipe=factory(global.Config,global.EventHandler,global.Index)}(this,function(Config,EventHandler,index){"use strict";var _interopDefaultLegacy=e=>e&&"object"==typeof e&&"default"in e?e:{default:e},Config=_interopDefaultLegacy(Config);const EventHandler__default=_interopDefaultLegacy(EventHandler),NAME="swipe",EVENT_KEY=".bs.swipe",EVENT_TOUCHSTART="touchstart.bs.swipe",EVENT_TOUCHMOVE="touchmove.bs.swipe",EVENT_TOUCHEND="touchend.bs.swipe",EVENT_POINTERDOWN="pointerdown.bs.swipe",EVENT_POINTERUP="pointerup.bs.swipe",POINTER_TYPE_TOUCH="touch",POINTER_TYPE_PEN="pen",CLASS_NAME_POINTER_EVENT="pointer-event",SWIPE_THRESHOLD=40,Default={endCallback:null,leftCallback:null,rightCallback:null},DefaultType={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Swipe extends Config.default{constructor(element,config){super(),(this._element=element)&&Swipe.isSupported()&&(this._config=this._getConfig(config),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}dispose(){EventHandler__default.default.off(this._element,EVENT_KEY)}_start(event){this._supportPointerEvents?this._eventIsPointerPenTouch(event)&&(this._deltaX=event.clientX):this._deltaX=event.touches[0].clientX}_end(event){this._eventIsPointerPenTouch(event)&&(this._deltaX=event.clientX-this._deltaX),this._handleSwipe(),index.execute(this._config.endCallback)}_move(event){this._deltaX=event.touches&&1<event.touches.length?0:event.touches[0].clientX-this._deltaX}_handleSwipe(){var absDeltaX=Math.abs(this._deltaX),absDeltaX;absDeltaX<=40||(absDeltaX=absDeltaX/this._deltaX,this._deltaX=0,absDeltaX&&index.execute(0<absDeltaX?this._config.rightCallback:this._config.leftCallback))}_initEvents(){this._supportPointerEvents?(EventHandler__default.default.on(this._element,EVENT_POINTERDOWN,event=>this._start(event)),EventHandler__default.default.on(this._element,EVENT_POINTERUP,event=>this._end(event)),this._element.classList.add("pointer-event")):(EventHandler__default.default.on(this._element,EVENT_TOUCHSTART,event=>this._start(event)),EventHandler__default.default.on(this._element,EVENT_TOUCHMOVE,event=>this._move(event)),EventHandler__default.default.on(this._element,EVENT_TOUCHEND,event=>this._end(event)))}_eventIsPointerPenTouch(event){return this._supportPointerEvents&&("pen"===event.pointerType||"touch"===event.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||0<navigator.maxTouchPoints}}return Swipe});