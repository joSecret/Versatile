!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("./util/index"),require("./dom/event-handler"),require("./dom/selector-engine"),require("./util/scrollbar"),require("./base-component"),require("./util/backdrop"),require("./util/focustrap"),require("./util/component-functions")):"function"==typeof define&&define.amd?define(["./util/index","./dom/event-handler","./dom/selector-engine","./util/scrollbar","./base-component","./util/backdrop","./util/focustrap","./util/component-functions"],factory):(global="undefined"!=typeof globalThis?globalThis:global||self).Modal=factory(global.Index,global.EventHandler,global.SelectorEngine,global.Scrollbar,global.BaseComponent,global.Backdrop,global.Focustrap,global.ComponentFunctions)}(this,function(index,EventHandler,SelectorEngine,ScrollBarHelper,BaseComponent,Backdrop,FocusTrap,componentFunctions){"use strict";var _interopDefaultLegacy=e=>e&&"object"==typeof e&&"default"in e?e:{default:e};const EventHandler__default=_interopDefaultLegacy(EventHandler),SelectorEngine__default=_interopDefaultLegacy(SelectorEngine),ScrollBarHelper__default=_interopDefaultLegacy(ScrollBarHelper);var EventHandler=_interopDefaultLegacy(BaseComponent);const Backdrop__default=_interopDefaultLegacy(Backdrop),FocusTrap__default=_interopDefaultLegacy(FocusTrap),NAME="modal";var DATA_KEY="bs.modal";const EVENT_KEY=".bs.modal";var DATA_API_KEY=".data-api",EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE;const ESCAPE_KEY="Escape",EVENT_HIDE="hide.bs.modal",EVENT_HIDE_PREVENTED="hidePrevented.bs.modal",EVENT_HIDDEN="hidden.bs.modal",EVENT_SHOW="show.bs.modal",EVENT_SHOWN="shown.bs.modal",EVENT_RESIZE="resize.bs.modal",EVENT_CLICK_DISMISS="click.dismiss.bs.modal",EVENT_MOUSEDOWN_DISMISS="mousedown.dismiss.bs.modal",EVENT_KEYDOWN_DISMISS="keydown.dismiss.bs.modal",CLASS_NAME_OPEN="modal-open",CLASS_NAME_FADE="fade",CLASS_NAME_SHOW="show",CLASS_NAME_STATIC="modal-static",OPEN_SELECTOR=".modal.show",SELECTOR_DIALOG=".modal-dialog",SELECTOR_MODAL_BODY=".modal-body",Default={backdrop:!0,focus:!0,keyboard:!0},DefaultType={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Modal extends EventHandler.default{constructor(element,config){super(element,config),this._dialog=SelectorEngine__default.default.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ScrollBarHelper__default.default,this._addEventListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}toggle(relatedTarget){return this._isShown?this.hide():this.show(relatedTarget)}show(relatedTarget){var showEvent;this._isShown||this._isTransitioning||EventHandler__default.default.trigger(this._element,EVENT_SHOW,{relatedTarget:relatedTarget}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add("modal-open"),this._adjustDialog(),this._backdrop.show(()=>this._showElement(relatedTarget)))}hide(){var hideEvent;!this._isShown||this._isTransitioning||EventHandler__default.default.trigger(this._element,EVENT_HIDE).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const htmlElement of[window,this._dialog])EventHandler__default.default.off(htmlElement,EVENT_KEY);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Backdrop__default.default({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FocusTrap__default.default({trapElement:this._element})}_showElement(relatedTarget){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;var modalBody=SelectorEngine__default.default.findOne(".modal-body",this._dialog),modalBody=(modalBody&&(modalBody.scrollTop=0),index.reflow(this._element),this._element.classList.add("show"),()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,EventHandler__default.default.trigger(this._element,EVENT_SHOWN,{relatedTarget:relatedTarget})});this._queueCallback(modalBody,this._dialog,this._isAnimated())}_addEventListeners(){EventHandler__default.default.on(this._element,EVENT_KEYDOWN_DISMISS,event=>{"Escape"===event.key&&(this._config.keyboard?(event.preventDefault(),this.hide()):this._triggerBackdropTransition())}),EventHandler__default.default.on(window,EVENT_RESIZE,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),EventHandler__default.default.on(this._element,EVENT_MOUSEDOWN_DISMISS,event=>{EventHandler__default.default.one(this._element,EVENT_CLICK_DISMISS,event2=>{this._element===event.target&&this._element===event2.target&&("static"===this._config.backdrop?this._triggerBackdropTransition():this._config.backdrop&&this.hide())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove("modal-open"),this._resetAdjustments(),this._scrollBar.reset(),EventHandler__default.default.trigger(this._element,EVENT_HIDDEN)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){var hideEvent=EventHandler__default.default.trigger(this._element,EVENT_HIDE_PREVENTED);if(!hideEvent.defaultPrevented){var hideEvent=this._element.scrollHeight>document.documentElement.clientHeight;const initialOverflowY=this._element.style.overflowY;"hidden"===initialOverflowY||this._element.classList.contains("modal-static")||(hideEvent||(this._element.style.overflowY="hidden"),this._element.classList.add("modal-static"),this._queueCallback(()=>{this._element.classList.remove("modal-static"),this._queueCallback(()=>{this._element.style.overflowY=initialOverflowY},this._dialog)},this._dialog),this._element.focus())}}_adjustDialog(){var isModalOverflowing=this._element.scrollHeight>document.documentElement.clientHeight,scrollbarWidth=this._scrollBar.getWidth(),isBodyOverflowing=0<scrollbarWidth,property;if(isBodyOverflowing&&!isModalOverflowing&&(property=index.isRTL()?"paddingLeft":"paddingRight",this._element.style[property]=scrollbarWidth+"px"),!isBodyOverflowing&&isModalOverflowing){const property=index.isRTL()?"paddingRight":"paddingLeft";this._element.style[property]=scrollbarWidth+"px"}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(config,relatedTarget){return this.each(function(){var data=Modal.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config])throw new TypeError(`No method named "${config}"`);data[config](relatedTarget)}})}}return EventHandler__default.default.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(event){const target=index.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&event.preventDefault(),EventHandler__default.default.one(target,EVENT_SHOW,showEvent=>{showEvent.defaultPrevented||EventHandler__default.default.one(target,EVENT_HIDDEN,()=>{index.isVisible(this)&&this.focus()})});var event=SelectorEngine__default.default.findOne(".modal.show"),data;event&&Modal.getInstance(event).hide(),Modal.getOrCreateInstance(target).toggle(this)}),componentFunctions.enableDismissTrigger(Modal),index.defineJQueryPlugin(Modal),Modal});