!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("./util/index"),require("./dom/event-handler"),require("./dom/selector-engine"),require("./base-component")):"function"==typeof define&&define.amd?define(["./util/index","./dom/event-handler","./dom/selector-engine","./base-component"],factory):(global="undefined"!=typeof globalThis?globalThis:global||self).Collapse=factory(global.Index,global.EventHandler,global.SelectorEngine,global.BaseComponent)}(this,function(index,EventHandler,SelectorEngine,BaseComponent){"use strict";var _interopDefaultLegacy=e=>e&&"object"==typeof e&&"default"in e?e:{default:e},BaseComponent__default;const EventHandler__default=_interopDefaultLegacy(EventHandler),SelectorEngine__default=_interopDefaultLegacy(SelectorEngine),NAME="collapse";var DATA_KEY="bs.collapse",EVENT_KEY=".bs.collapse",DATA_API_KEY=".data-api",EVENT_CLICK_DATA_API;const EVENT_SHOW="show.bs.collapse",EVENT_SHOWN="shown.bs.collapse",EVENT_HIDE="hide.bs.collapse",EVENT_HIDDEN="hidden.bs.collapse",CLASS_NAME_SHOW="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=":scope .collapse .collapse",CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE='[data-bs-toggle="collapse"]',Default={parent:null,toggle:!0},DefaultType={parent:"(null|element)",toggle:"boolean"};class Collapse extends _interopDefaultLegacy(BaseComponent).default{constructor(element,config){var toggleList;super(element,config),this._isTransitioning=!1,this._triggerArray=[];for(const elem of SelectorEngine__default.default.find(SELECTOR_DATA_TOGGLE)){var selector=index.getSelectorFromElement(elem),filterElement=SelectorEngine__default.default.find(selector).filter(foundElement=>foundElement===this._element);null!==selector&&filterElement.length&&this._triggerArray.push(elem)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}toggle(){this._isShown()?this.hide():this.show()}show(){if(!this._isTransitioning&&!this._isShown()){let activeChildren=[];if(!(activeChildren=this._config.parent?this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(element=>element!==this._element).map(element=>Collapse.getOrCreateInstance(element,{toggle:!1})):activeChildren).length||!activeChildren[0]._isTransitioning){var startEvent=EventHandler__default.default.trigger(this._element,EVENT_SHOW);if(!startEvent.defaultPrevented){for(const activeInstance of activeChildren)activeInstance.hide();const dimension=this._getDimension();this._element.classList.remove("collapse"),this._element.classList.add("collapsing"),this._element.style[dimension]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;var startEvent=()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse","show"),this._element.style[dimension]="",EventHandler__default.default.trigger(this._element,EVENT_SHOWN)},capitalizedDimension,scrollSize="scroll"+(dimension[0].toUpperCase()+dimension.slice(1));this._queueCallback(startEvent,this._element,!0),this._element.style[dimension]=this._element[scrollSize]+"px"}}}}hide(){if(!this._isTransitioning&&this._isShown()){var startEvent=EventHandler__default.default.trigger(this._element,EVENT_HIDE);if(!startEvent.defaultPrevented){var startEvent=this._getDimension();this._element.style[startEvent]=this._element.getBoundingClientRect()[startEvent]+"px",index.reflow(this._element),this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show");for(const trigger of this._triggerArray){var element=index.getElementFromSelector(trigger);element&&!this._isShown(element)&&this._addAriaAndCollapsedClass([trigger],!1)}this._isTransitioning=!0;var complete=()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse"),EventHandler__default.default.trigger(this._element,EVENT_HIDDEN)};this._element.style[startEvent]="",this._queueCallback(complete,this._element,!0)}}}_isShown(element=this._element){return element.classList.contains("show")}_configAfterMerge(config){return config.toggle=Boolean(config.toggle),config.parent=index.getElement(config.parent),config}_getDimension(){return this._element.classList.contains("collapse-horizontal")?WIDTH:HEIGHT}_initializeChildren(){var children;if(this._config.parent)for(const element of this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE)){var selected=index.getElementFromSelector(element);selected&&this._addAriaAndCollapsedClass([element],this._isShown(selected))}}_getFirstLevelChildren(selector){const children=SelectorEngine__default.default.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine__default.default.find(selector,this._config.parent).filter(element=>!children.includes(element))}_addAriaAndCollapsedClass(triggerArray,isOpen){if(triggerArray.length)for(const element of triggerArray)element.classList.toggle("collapsed",!isOpen),element.setAttribute("aria-expanded",isOpen)}static jQueryInterface(config){const _config={};return"string"==typeof config&&/show|hide/.test(config)&&(_config.toggle=!1),this.each(function(){var data=Collapse.getOrCreateInstance(this,_config);if("string"==typeof config){if(void 0===data[config])throw new TypeError(`No method named "${config}"`);data[config]()}})}}return EventHandler__default.default.on(document,"click.bs.collapse.data-api",SELECTOR_DATA_TOGGLE,function(event){("A"===event.target.tagName||event.delegateTarget&&"A"===event.delegateTarget.tagName)&&event.preventDefault();var event=index.getSelectorFromElement(this),selectorElements;for(const element of SelectorEngine__default.default.find(event))Collapse.getOrCreateInstance(element,{toggle:!1}).toggle()}),index.defineJQueryPlugin(Collapse),Collapse});