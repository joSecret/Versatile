!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("./util/index"),require("./util/scrollbar"),require("./dom/event-handler"),require("./base-component"),require("./dom/selector-engine"),require("./util/backdrop"),require("./util/focustrap"),require("./util/component-functions")):"function"==typeof define&&define.amd?define(["./util/index","./util/scrollbar","./dom/event-handler","./base-component","./dom/selector-engine","./util/backdrop","./util/focustrap","./util/component-functions"],factory):(global="undefined"!=typeof globalThis?globalThis:global||self).Offcanvas=factory(global.Index,global.Scrollbar,global.EventHandler,global.BaseComponent,global.SelectorEngine,global.Backdrop,global.Focustrap,global.ComponentFunctions)}(this,function(index,ScrollBarHelper,EventHandler,BaseComponent,SelectorEngine,Backdrop,FocusTrap,componentFunctions){"use strict";var _interopDefaultLegacy=e=>e&&"object"==typeof e&&"default"in e?e:{default:e};const ScrollBarHelper__default=_interopDefaultLegacy(ScrollBarHelper),EventHandler__default=_interopDefaultLegacy(EventHandler);var ScrollBarHelper=_interopDefaultLegacy(BaseComponent);const SelectorEngine__default=_interopDefaultLegacy(SelectorEngine),Backdrop__default=_interopDefaultLegacy(Backdrop),FocusTrap__default=_interopDefaultLegacy(FocusTrap),NAME="offcanvas";var DATA_KEY,EventHandler="."+"bs.offcanvas",DATA_API_KEY=".data-api",BaseComponent=`load${EventHandler}.data-api`;const ESCAPE_KEY="Escape",CLASS_NAME_SHOW="show",CLASS_NAME_SHOWING="showing",CLASS_NAME_HIDING="hiding",CLASS_NAME_BACKDROP="offcanvas-backdrop",OPEN_SELECTOR=".offcanvas.show",EVENT_SHOW="show"+EventHandler,EVENT_SHOWN="shown"+EventHandler,EVENT_HIDE="hide"+EventHandler,EVENT_HIDE_PREVENTED="hidePrevented"+EventHandler,EVENT_HIDDEN="hidden"+EventHandler;var SelectorEngine="resize"+EventHandler,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE;const EVENT_KEYDOWN_DISMISS="keydown.dismiss"+EventHandler,Default={backdrop:!0,keyboard:!0,scroll:!1},DefaultType={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Offcanvas extends ScrollBarHelper.default{constructor(element,config){super(element,config),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}toggle(relatedTarget){return this._isShown?this.hide():this.show(relatedTarget)}show(relatedTarget){var showEvent,completeCallBack;this._isShown||EventHandler__default.default.trigger(this._element,EVENT_SHOW,{relatedTarget:relatedTarget}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ScrollBarHelper__default.default).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("showing"),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove("showing"),EventHandler__default.default.trigger(this._element,EVENT_SHOWN,{relatedTarget:relatedTarget})},this._element,!0))}hide(){var hideEvent,completeCallback;this._isShown&&!EventHandler__default.default.trigger(this._element,EVENT_HIDE).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ScrollBarHelper__default.default).reset(),EventHandler__default.default.trigger(this._element,EVENT_HIDDEN)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){var clickCallback=()=>{"static"===this._config.backdrop?EventHandler__default.default.trigger(this._element,EVENT_HIDE_PREVENTED):this.hide()},isVisible=Boolean(this._config.backdrop);return new Backdrop__default.default({className:CLASS_NAME_BACKDROP,isVisible:isVisible,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:isVisible?clickCallback:null})}_initializeFocusTrap(){return new FocusTrap__default.default({trapElement:this._element})}_addEventListeners(){EventHandler__default.default.on(this._element,EVENT_KEYDOWN_DISMISS,event=>{"Escape"===event.key&&(this._config.keyboard?this.hide():EventHandler__default.default.trigger(this._element,EVENT_HIDE_PREVENTED))})}static jQueryInterface(config){return this.each(function(){var data=Offcanvas.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config]||config.startsWith("_")||"constructor"===config)throw new TypeError(`No method named "${config}"`);data[config](this)}})}}return EventHandler__default.default.on(document,`click${EventHandler}.data-api`,'[data-bs-toggle="offcanvas"]',function(event){var target=index.getElementFromSelector(this),event,data;["A","AREA"].includes(this.tagName)&&event.preventDefault(),index.isDisabled(this)||(EventHandler__default.default.one(target,EVENT_HIDDEN,()=>{index.isVisible(this)&&this.focus()}),(event=SelectorEngine__default.default.findOne(OPEN_SELECTOR))&&event!==target&&Offcanvas.getInstance(event).hide(),Offcanvas.getOrCreateInstance(target).toggle(this))}),EventHandler__default.default.on(window,BaseComponent,()=>{for(const selector of SelectorEngine__default.default.find(OPEN_SELECTOR))Offcanvas.getOrCreateInstance(selector).show()}),EventHandler__default.default.on(window,SelectorEngine,()=>{for(const element of SelectorEngine__default.default.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(element).position&&Offcanvas.getOrCreateInstance(element).hide()}),componentFunctions.enableDismissTrigger(Offcanvas),index.defineJQueryPlugin(Offcanvas),Offcanvas});